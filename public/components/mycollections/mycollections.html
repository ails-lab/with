<div role="main">

<div class="container-fluid">
	<div class="wrapper">
		<!-- ko if: isLogged() == true  -->
		<side-bar params="route: route"></side-bar>
		<!-- /ko -->
		<main>
		  <!-- collection section-->
		  <section class="collection">
			<section class="header">
			  <!-- ko if: showsExhibitions -->
			  <a id="picker" href="#" data-toggle="dropdown" class="picker" >
			  	<span id="pickerTitle" class="text">My Exhibitions</span><span class="arrow"></span>
			  </a>
			  <!-- /ko -->
			  <!-- ko else -->
			  <a id="picker" href="#" data-toggle="dropdown" class="picker" >
			  	<span id="pickerTitle" class="text">My Collections</span><span class="arrow"></span>
			  </a>
			  <!-- /ko -->
			  <!-- ko if: showsExhibitions -->
			  	<ul aria-labelledby="picker" class="dropdown-menu">
				<li data-bind="click: changeTab"><a style="cursor:pointer;" >My Exhibitions</a></li>
				<li data-bind="click: changeTab"><a style="cursor:pointer;" >Exhibitions shared with me</a></li>
			  </ul>
			  <!-- /ko -->
			  <!-- ko else -->
			  <ul aria-labelledby="picker" class="dropdown-menu">
				<li data-bind="click: changeTab"><a style="cursor:pointer;" >My Collections</a></li>
				<li data-bind="click: changeTab"><a style="cursor:pointer;" >Collections shared with me</a></li>
			  </ul>
			  <!-- /ko -->
			  <!-- ko if: showsExhibitions -->
			    <a href="#" class="new" ><span class="plus"></span><span class="text" >New Exhibition</span></a>
			  <!-- /ko -->
			  <!-- ko else -->
			  
			    <a href="#" class="new" ><span class="plus"></span><span class="text" >New Collection</span></a>
			    <!-- ko if: superUser -->
			    <div class="dropdown1">
			    <a id="picker1" href="#" data-toggle="dropdown" 
			      ><span class="plus"></span><span id="pickerTitle1" class="text" >Import Collection</span>
			    <span class="arrow"></span>
			    </a>
			    <ul aria-labelledby="picker1" class="dropdown-menu">
				<li data-bind="click: openAction.bind($data,'importEuropeana')"><a style="cursor:pointer;" >Europeana Collection</a></li>
				<li data-bind="click: openAction.bind($data,'importEuropeanaSearch')"><a style="cursor:pointer;" >Europeana Search</a></li>
			  </ul>
			  </div>
			  <!-- /ko -->
			  <!-- /ko -->
			</section>
			<!-- message-->
			<section class="message"><img src="img/ui/ic-inbox.png" class="hero">
			 <!-- ko if: showsExhibitions -->
			  <div class="message-body">
				<div class="header">Welcome to My Exhibitions</div>
				<div class="description">This is <b>My Exhibitions</b>. All exhibitions created by and shared with you will be presented here.</div>
				   <a href="#" data-bind="click: hideMessage">
				   	<span class="cross"></span>
				   	<span class="text">Hide welcome message</span>
				   </a>
			  </div>
			   <!-- /ko -->
			  <!-- ko else -->
			  <div class="message-body">
				<div class="header">Welcome to My Collections</div>
				<div class="description">This is <b>My Collections</b>. All collections created by and shared with you will be presented here.</div>
				   <a href="#" data-bind="click: hideMessage">
				   	<span class="cross"></span>
				   	<span class="text">Hide welcome message</span>
				   </a>
			  </div>
			  <!-- /ko -->
			</section>
			<!-- collection main-->
			<section class="collection-list">
			  <!-- collection main header-->
			  <div class="list-head">
				<div class="sort"><span>Sort by</span><a id="sorting" href="#" data-toggle="dropdown"><span class="text">Date</span><span class="arrow"></span></a>
				  <!-- dropdown-->
				  <ul aria-labelledby="sorting" class="dropdown-menu">
				  	<li><a href="#" data-bind="click: sortByDate">Date</a></li>
					<li><a href="#" data-bind="click: sortByTitle">Title</a></li>
				  </ul>
				</div>
				<div class="list-control">
					<a href="#" data-toggle="tooltip" data-placement="top" title="List view" class="fa fa-bars"></a>
					<a href="#" data-toggle="tooltip" data-placement="top" title="Grid view" class="fa fa-th active"></a>
				</div>
			  </div>
			  <!-- listing-->
			  <ul class="list-body grids">
					<div data-bind="{visible: collectionSet() == 'my', template: { name: 'collectionsTemplate', foreach: myCollections()}}"></div>
					<div data-bind="{visible: collectionSet() == 'shared', template: { name: 'collectionsTemplate', foreach: sharedCollections()}}"></div>
			  <!-- ko if: collectionSet() == 'my' -->
			  <a style="cursor:pointer;" class="loadmore"
			  data-bind="{visible: (!showsExhibitions && collectionCount() > myCollections().length) || (showsExhibitions && exhibitionCount() > myCollections().length),
			  event: {click: moreCollections.bind($data, showsExhibitions)}}">load more
			      <div class="left"></div>
                  <div class="right"></div>
                  <div class="top"></div>
                  <div class="bot"></div>
              </a>
			  <!-- /ko -->
			  <!-- ko if: collectionSet() == "shared" -->
			  	<a style="cursor:pointer;" class="loadmore"
			  	data-bind="event: {click: moreCollections.bind($data, showsExhibitions)}">load more
			   <div class="left"></div>
                  <div class="right"></div>
                  <div class="top"></div>
                  <div class="bot"></div>
              </a>
			  <!-- /ko -->
			  </ul>
			</section>
			<section class="action edit">
			  <div class="action-header">
			  	<!-- ko if: showsExhibitions -->
				<div class="title">Edit Exhibition</div>
				<!-- /ko -->
			    <!-- ko else -->
			    <div class="title">Edit Collection</div>
			    <!-- /ko -->
			  </div>
			  <div class="toggle">
				<input type="checkbox" id="toggle1" data-bind="{checked: isPublicToEdit, click: isPublicToggle}">
				<label for="toggle1"></label>
				<span class="private">private</span>
				<span class="public">public</span>
			  </div>
			  <div class="action-body" data-bind="validationElement: titleToEdit">
				<input type="text" data-bind="{value: titleToEdit, valueUpdate: 'afterkeypress', hasFocus: true
				      attr: {placeholder: titleToEdit}}">
				  </input>
				<textarea data-bind="{value: descriptionToEdit, valueUpdate: 'afterkeypress', hasFocus: false
				      attr: {placeholder: descriptionToEdit}}"></textarea>
			  </div>
			  <div class="button-group">
			  	<a class="btn-green-o cancel" data-bind="click: closeSideBar">Cancel</a>
			  	<a class="btn-green" data-bind="click: editCollection">Save collection</a>
			  </div>
			</section>
			<!-- collection new-->
			<section class="action new">
			  <div class="action-header">
			  	<!-- ko if: showsExhibitions -->
				<div class="title">New Exhibition</div>
				<!-- /ko -->
			    <!-- ko else -->
			    <div class="title">New Collection</div>
			    <!-- /ko -->
				<div class="toggle">
				  <input type="checkbox" id="toggle2" data-bind="checked: isPublicToEdit">
				  <label for="toggle2" ></label><span class="private">private</span>
				  <span class="public">public</span>
				</div>
			  </div>
			  <div class="action-body">
			  	<div class="form-group" data-bind="validationElement: titleToEdit">
				  	<!-- ko if: showsExhibitions -->
					<input type="text" data-bind="value: titleToEdit, valueUpdate: 'afterkeypress', hasFocus: true" placeholder="Name your exhibition">
					<!-- /ko -->
				    <!-- ko else -->
				    <input type="text" data-bind="value: titleToEdit, valueUpdate: 'afterkeypress', hasFocus: true" placeholder="Name your collection">
					<!-- /ko -->
				</div>
				<textarea rows="10" placeholder="Description" data-bind="value: descriptionToEdit"></textarea>
			  </div>
			  <!-- ko if: showsExhibitions -->
			  <div class="button-group">
			  	<a class="btn-green-o cancel" data-bind="click: closeSideBar">Cancel</a>
			  	<a href="#" class="btn-green" data-bind="click: createCollection.bind($data, 'Exhibition')">Create and go to editor</a>
			  	</div>
			   <!-- /ko -->
			    <!-- ko else -->
			  <div class="button-group">
			  	<a class="btn-green-o cancel" data-bind="click: closeSideBar">Cancel</a>
			    <a data-bind="click: createCollection.bind($data, 'SimpleCollection')" class="btn-green">Create collection</a>
			   </div>
			    <!-- /ko -->
			</section>
			
			<!-- import collection -->

				<section class="action importEuropeana">
					<div class="action-header">
						<div class="title">Import Europeana Collection</div>
					</div>
					<div class="action-body">

						<div>
							<input type="text"
								data-bind="value: europeanaID, valueUpdate: 'afterkeypress', hasFocus: true"
								placeholder="Europeana collection ID">
						</div>
					</div>
					<div class="button-group">
						<a class="btn-green-o cancel" data-bind="click: closeSideBar">Cancel</a>
						<a data-bind="click: importEuropeanaCollection " class="btn-green">Import</a>
					</div>


				</section>
				
				<section class="action importEuropeanaSearch">
					<div class="action-header">
						<div class="title">Import Europeana Search</div>
					</div>
					<div class="action-body">

						<div>
							<input type="text"
								data-bind="value: importCollectionName, valueUpdate: 'afterkeypress', hasFocus: true"
								placeholder="Collection Name">

						</div>
						<div>
							<input type="text"
								data-bind="value: europeanaSearch, valueUpdate: 'afterkeypress', hasFocus: true"
								placeholder="Europeana Search Term">
						</div>
						<div>
							<input type="text"
								data-bind="value: europeanaLimit, valueUpdate: 'afterkeypress', hasFocus: true"
								placeholder="Import Limit">
						</div>
					</div>
					<div class="button-group">
						<a class="btn-green-o cancel" data-bind="click: closeSideBar">Cancel</a>
						<a data-bind="click: importEuropeanaSearch " class="btn-green">Import</a>
					</div>

				</section>
				

				<!-- collection give access-->
			<section class="action access">
			  <div class="action-header">
				<div class="title">Give access to users and user groups</div>
			  </div>
			  <div class="toggle">
				<input type="checkbox" id="toggle1" data-bind="{checked: isPublicToEdit, click: isPublicToggle}">
				<label for="toggle1"></label>
				<span class="private">private</span>
				<span class="public">public</span>
			  </div>
			  <div class="action-body">
				<div class="group">
				  <div class="title">Users access</div>
				  <input type="text" id="usernameOrEmail" data-bind="autocompleteUsername1: myUsername, category:1" placeholder="Start typing username or email">
				  <ul class="access-list">
				  	<!-- ko foreach: usersToShare -->
					<li>
					  <!-- ko if: $data.image -->
					 	 <div class="thumbnails"><img data-bind="attr: {src: image}"></div>
					  <!--/ko-->
					  <!-- ko else -->
					  	<div class="thumbnails"><img src="images/user.png"></div>
					  <!-- /ko -->

					  <a href="#" data-toggle="tooltip" data-placement="top" data-bind="{attr: {title: username}, click: $parent.removeRights}" class="trash">
					  <i class="fa fa-trash"></i></a>
					  <div class="toggle">
						<input type="checkbox" data-bind="{attr: {id: username}, checked: accessChecked, click: $parent.changeRights}">
						<label data-bind = "{attr: {for: username}}"></label>
						<span class="private">view</span>
						<span class="public">co-edit</span>
					  </div>
					</li>
					<!-- /ko -->
				  </ul>
				</div>
				<div class="group">
				  <div class="title">Groups access</div>
				  <input type="text" id="usernameOrEmail" data-bind="autocompleteUsername1: myUsername, category:2" placeholder="Start typing group name">
				  <ul class="access-list" data-bind="foreach: userGroupsToShare">
				  	<li class="blue">
					    <span class="text" data-bind="text: username().substring(0,2).toUpperCase()"></span>
						<a data-toggle="tooltip" data-placement="top" style="cursor:pointer;" data-bind="{attr: {title: username}, click: $parent.removeRights}" class="trash">
					  	<i class="fa fa-trash"></i></a>
					  <div class="toggle">
						<input type="checkbox" id="u2" data-bind="{attr: {id: username}, checked: accessChecked, click: $parent.changeRights}">
						<label data-bind="{attr: {for: username}}"></label>
						<span class="private">view</span>
						<span class="public">co-edit</span>
					  </div>
					</li>
				  </ul>
				</div>
			  </div>
			  <div class="button-group">
			  	<a href="#" class="btn-green cancel" data-bind="click: closeSideBar">Close</a>
			  </div>


			   <script type="text/html" id="collectionsTemplate">
			   	<li data-bind="css: { private: !administrative.access.isPublic()}">
				  <div class="thumbnails">
				  	<a href="#" data-bind="attr: {href: $parent.showsExhibitions? (administrative.entryCount() > 0? 'index.html#exhibitionview/'+dbId(): 'index.html#exhibition-edit/'+dbId()): 'index.html#collectionview/'+dbId()}" title="view"> 
				  	<!-- ko if: administrative.access.isPublic()-->
					<div class="category">public</div>
					<!--/ko-->
					<!-- ko else -->
					<div class="category">private</div>
					<!--/ko-->
					<!-- ko if: media()[0]-->
					<div class="wrap"><img data-bind="attr: {src: media()[0].thumbnailUrl}" onError="this.src='img/content/thumb-empty.png'"/></div>
					<!-- /ko -->
					<!-- ko else -->
					<div class="wrap"></div>
					<!-- /ko -->
					<!-- ko if: media()[1]-->
					<div class="wrap small"><img data-bind="attr: {src: media()[1].thumbnailUrl}"/></div>
					<!-- /ko -->
					<!-- ko else -->
					<div class="wrap small"></div>
					<!-- /ko -->
					<!-- ko if: media()[2]-->
					<div class="wrap small"><img data-bind="attr: {src: media()[2].thumbnailUrl}"/></div>
					<!-- /ko -->
					<!-- ko else -->
					<div class="wrap small"></div>
					<!-- /ko -->
					</a>
				  </div>
				  <div class="meta">
				  	<!-- ko if: $parent.showsExhibitions -->
				  	<a title="View exhibition" data-bind="{text: title(), attr: {href: 'index.html#exhibitionview/'+dbId()}}" class="header truncate"></a>
				  	<!-- /ko -->
					<!-- ko else -->
					<a class="header" data-bind="{text: title(), attr: {href: 'index.html#collectionview/'+dbId()}}" class="header truncate"></a>
					<!-- /ko -->
					<div class="description" data-bind="text: description()"></div>
					<div class="other-info">
					  <div class="count" data-bind="text: itemCount()"></div>
					  <div class="date" data-bind="text: administrative.created()"></div>
					  <div class="user"data-bind="text: withCreatorInfo.creatorName"></div>
					</div>
					<div class="action-group">
						<!--  ko if: myAccess() ==  "OWN" -->
						<!-- ko if: $parent.showsExhibitions -->
						<a data-toggle="tooltip" data-bind="click: $parent.deleteMyCollection" data-placement="top" title="Delete exhibition" class="fa fa-trash-o"></a>
						<a data-toggle="tooltip" data-placement="top" data-bind="click: $parent.openShareCollection" title="Share exhibition" class="fa fa-paper-plane-o"></a>
						<!-- /ko -->
						<!-- ko else -->
						<a data-toggle="tooltip" data-bind="click: $parent.deleteMyCollection" data-placement="top" title="Delete collection" class="fa fa-trash-o"></a>
						<a data-toggle="tooltip" data-placement="top" data-bind="click: $parent.openShareCollection" title="Share collection" class="fa fa-paper-plane-o"></a>
						<!-- /ko -->
						<!-- /ko -->
						<!--  ko if: (myAccess() ==  "OWN" || myAccess() == "WRITE")-->
						<a data-toggle="tooltip" data-bind="click: $parent.prepareForEditCollection" data-placement="top" title="Edit" class="fa fa-pencil editaction"></a>
						<!-- /ko -->
						<span data-bind="visible: myAccess() == 'READ'">&nbsp;</span>
					</div>
				  </div>
				</li>
			  </script>

			</section>
		  </section>
		</main>
	</div>
</div>
</div>
