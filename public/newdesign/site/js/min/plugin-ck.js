function logger(e,t){debug&&console[e](t)}var WITHApp=WITHApp||{},console=console,debug=!0;WITHApp.ui=function(e){var t=$.extend({page:"default",mSelector:".grid",mItem:".item",mSizer:".sizer",mobile:!1,mobileTrigger:".mobile-trigger"},e||{});$(window).width()<767&&(t.mobile=!0),this.init=function(){logger("info","plugin.js / init"),s(),c(),u(),f(),g(),d(),h(),v(),o(),p(),m(),a(),i(),r(),C(),w(),b(),k()};var i=function(){logger("info","plugins.js / initSearchViewToggle"),0!==$(".searchbar .view").length&&$(".searchbar .view a").click(function(e){e.preventDefault(),e.stopPropagation(),$(".searchbar .view li").removeClass("active"),$(this).parent().addClass("active");var i=$(this).attr("data-view");$(".searchresults").find("section").removeClass("active"),$(".searchresults #"+i+"list").toggleClass("active"),"grid"===i&&(console.log("test"),$(t.mSelector).isotope())})},a=function(){function e(){$("#columnlist .row .column").attr("style","");var e=$(window).width(),t=$("#columnlist .row .column").length,i=$("#columnlist .row .column").first().width();if(e>t*i&&e>768){var a=100/t;$("#columnlist .row .column").css({width:a+"%"}),$("#pointermark").fadeOut()}else $("#pointermark").fadeIn()}logger("info","plugins.js / initSearchColumnAdjustment"),e(),$(window).resize(function(){e()})},n=function(){logger("info","plugins.js / initSearchSetting"),$(".searchbar .settings").length>0&&$(".searchbar .settings > a").on("click",function(e){e.preventDefault(),$(this).parent().toggleClass("active")})},l=function(){logger("info","plugin.js / initNicescroll"),$("body").niceScroll({autohidemode:!1}),0!==$("section.action").length&&$("section.action").niceScroll()},o=function(){if(logger("info","plugin.js / Collection Action"),0!==$(".action .button-group").length&&$(".cancel").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".searchresults").length>0&&$(".searchresults").hasClass("openfilter")&&$(".searchresults").removeClass("openfilter")}),0!==$(".action-group").length&&($(".editaction").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.edit").addClass("active")}),$(".fa-paper-plane-o").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.access").addClass("active")}),$(".members").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.access").addClass("active")}),$(".fa-download").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.collect").addClass("active")}),$(".collectbutton").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.collect").addClass("active")})),0!==$("a.creditbutton").length&&$("a.creditbutton").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.creditsection").addClass("active")}),0!==$("a.addmediabutton").length&&$("a.addmediabutton").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.addmediasection").addClass("active")}),0!==$("a.upload").length&&$("a.upload").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.upload").addClass("active")}),0!==$("a.uploadimage").length&&$("a.uploadimage").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.upload").addClass("active")}),0!==$("a.new").length&&$("a.new").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.new").addClass("active")}),0!==$("a.detail-control").length&&$("a.detail-control").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.api").addClass("active")}),0!==$(".members-access").length&&$(".members-access").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.members").addClass("active")}),0!==$(".action").length){var e='<textarea rows="10" placeholder="Describe your collection"></textarea>';$(".action .add").click(function(t){t.preventDefault(),$(this).hide(),$(this).first().after(e)})}$(".searchbar .settings > a").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.searchfilter").addClass("active"),$(".searchresults").addClass("openfilter")}),$(".showprofile").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.profile").addClass("active")}),$(".editbox").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.editsection").addClass("active")}),$("#multiplecollect").click(function(e){e.preventDefault(),$(".action").removeClass("active"),$(".action.collectmultiple").addClass("active")})},s=function(){logger("info","plugin.js / initIsotope"),$(window).load(function(){$(t.mSelector).length>0&&$(t.mSelector).isotope({columnWidth:t.mSizer,itemSelector:t.mItem,percentPosition:!0})}),$(".filter").length>0&&$(".filter .nav li").each(function(){var e=$(this),i=e.attr("data-filter");$("a",this).on("click",function(a){a.preventDefault(),$(t.mSelector).isotope({filter:i}),$(".filter .nav li").removeClass("active"),e.addClass("active")})})},c=function(){if(logger("info","plugin.js / initCharacterLimiter"),$(".featured .exhibition .description").length>0){var e=$(".featured .exhibition .description .text");if(e.text().length>240){var t=e.text().substr(0,240)+"...";e.text(t)}}},r=function(){logger("info","plugin.js / initCharacterLimiterToggle"),$(".limitchar").length>0&&$(".limitchar").each(function(){var e=$(".limitchar"),t=e.text().length;if(limit=e.attr("data-limit"),self=this,e.text().length>limit){var i=e.text().substr(0,limit)+'<span class="limitdot">...</span><span class="limithide">'+e.text().substr(limit,t)+'</span><div><a href="#" class="limittoggle">Show more</a></div>';e.html(i)}$(".limittoggle",this).on("click",function(e){e.preventDefault(),$(self).hasClass("show")?($(self).removeClass("show"),$(this).html("Show more")):($(self).addClass("show"),$(this).html("Show less"))})})},u=function(){logger("info","plugin.js / initSticky"),0!==$(".filter").length&&($(".filter").sticky({topSpacing:74}),$(window).on("scroll touchmove",function(){if($(".partners").length>0){var e=$(".partners").offset(),t=e.top-74;$(document).scrollTop()>=t?$(".filter").addClass("unstick"):$(".filter").removeClass("unstick")}}))},f=function(){logger("info","plugin.js / initMobileMenu"),$(t.mobileTrigger).click(function(e){e.preventDefault(),$(this).toggleClass("active"),$("nav").toggleClass("active")})},g=function(){if(logger("info","plugin.js / initMobileFilter"),t.mobile&&0!==$(".filter .nav").length){var e='<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Filter <span></span></a>';$(".filter .nav").addClass("dropdown-menu").wrap('<div class="select-filter dropdown"></div>'),$(".select-filter").prepend(e)}},d=function(){$('[data-toggle="tooltip"]').tooltip()},h=function(){logger("info","plugin.js / hideMessage"),0!==$("section.message").length&&$(".message-body a").click(function(e){e.preventDefault(),$(this).closest(".message").addClass("close")})},v=function(){0!==$(".list-control").length&&($(".list-control .fa-th").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".fa-bars").toggleClass("active"),$(".list-body").toggleClass("grids"),$(".list-body").toggleClass("list")}),$(".list-control .fa-bars").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".fa-th").toggleClass("active"),$(".list-body").toggleClass("grids"),$(".list-body").toggleClass("list")}))},p=function(){logger("info","plugin.js / initMediaViewer"),$(".mediaviewer").length>0&&($(".mediaviewer").on("click",function(e){e.preventDefault(),$("body").css("overflow","hidden"),$(".itemview").fadeIn()}),$(".closemedia").on("click",function(e){e.preventDefault(),$(".itemview").fadeOut(),$("body").css("overflow","visible")}))},m=function(){logger("info","plugins.js / initCarousel"),$(".carouselexhibition").length>0&&($(".carouselexhibition").slick({accessibility:!0,infinite:!1,dots:!0,arrows:!0,prevArrow:'<a href="#" class="slick-prev"><img src="img/ui/ic-left-arrow.png"></a>',nextArrow:'<a href="#" class="slick-next"><img src="img/ui/ic-right-arrow.png"></a>'}),$(".carouselexhibition .main .btn").click(function(e){e.preventDefault(),$(".carouselexhibition").slick("slickNext")}))},C=function(){logger("info","plugins.js / initShowMore"),$(".listmore").length>0&&$(".listmore").each(function(){var e=$(this).attr("data-target");$(this).on("click",function(t){t.preventDefault(),$("#"+e).hasClass("show")?($("#"+e).removeClass("show"),$(this).html("SHOW MORE INFO")):($("#"+e).addClass("show"),$(this).html("SHOW LESS INFO"))})})},w=function(){function e(){$(".item.selected").length>0?$("#multiplecollect").addClass("show"):$("#multiplecollect").removeClass("show")}logger("info","plugins.js / initShowMore"),$(".selectitem").length>0&&$(".selectitem").each(function(){$(this).click(function(){var t=$(this);t.is(":checked")?(t.closest(".item").addClass("selected"),e()):(t.closest(".item").removeClass("selected"),e())})})},b=function(){logger("info","plugins.js / initSmoothScroll"),$(".about").length>0&&$('a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top-72},1e3),!1}})},k=function(){logger("info","plugins.js / initExpandExhibitionText"),$(".exhibitionplayer .expand").length>0&&$(".exhibitionplayer .expand a").on("click",function(e){e.preventDefault(),$(this).parent().parent().parent().toggleClass("expanded")})}};