function logger(t,i){debug&&console[t](i)}var WITHApp=WITHApp||{},console=console,debug=!0;WITHApp.ui=function(t){var i=$.extend({page:"default",mSelector:".grid",mItem:".item",mSizer:".sizer",mobile:!1,mobileTrigger:".mobile-trigger"},t||{});$(window).width()<767&&(i.mobile=!0),this.init=function(){logger("info","plugin.js / init"),s(),c(),g(),f(),u(),d(),v(),h(),a(),m(),p(),n(),e(),r(),C()};var e=function(){logger("info","plugins.js / initSearchViewToggle"),0!==$(".searchbar .view").length&&$(".searchbar .view a").click(function(t){t.preventDefault(),t.stopPropagation(),$(".searchbar .view li").removeClass("active"),$(this).parent().addClass("active");var e=$(this).attr("data-view");$(".searchresults").find("section").removeClass("active"),$(".searchresults #"+e+"list").toggleClass("active"),"grid"===e&&(console.log("test"),$(i.mSelector).isotope())})},n=function(){function t(){$("#columnlist .row .column").attr("style","");var t=$(window).width(),i=$("#columnlist .row .column").length,e=$("#columnlist .row .column").first().width();if(t>i*e&&t>768){var n=100/i;$("#columnlist .row .column").css({width:n+"%"})}}logger("info","plugins.js / initSearchColumnAdjustment"),t(),$(window).resize(function(){t()})},o=function(){logger("info","plugins.js / initSearchSetting"),$(".searchbar .settings").length>0&&$(".searchbar .settings > a").on("click",function(t){t.preventDefault(),$(this).parent().toggleClass("active")})},l=function(){logger("info","plugin.js / initNicescroll"),$("body").niceScroll({autohidemode:!1}),0!==$("section.action").length&&$("section.action").niceScroll()},a=function(){if(logger("info","plugin.js / Collection Action"),0!==$(".action .button-group").length&&$(".cancel").click(function(t){t.preventDefault(),$(".action").removeClass("active")}),0!==$(".action-group").length&&($(".editaction").click(function(t){$(".action").removeClass("active"),$(".action.edit").addClass("active")}),$(".fa-paper-plane-o").click(function(t){$(".action").removeClass("active"),$(".action.access").addClass("active")}),$(".members").click(function(t){$(".action").removeClass("active"),$(".action.access").addClass("active")}),$(".fa-download").click(function(t){$(".action").removeClass("active"),$(".action.collect").addClass("active")}),$(".collectbutton").click(function(t){$(".action").removeClass("active"),$(".action.collect").addClass("active")})),0!==$("a.upload").length&&$("a.upload").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.upload").addClass("active")}),0!==$("a.new").length&&$("a.new").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.new").addClass("active")}),0!==$("a.detail-control").length&&$("a.detail-control").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.api").addClass("active")}),0!==$(".members-access").length&&$(".members-access").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.members").addClass("active")}),0!==$(".action").length){var t='<textarea rows="10" placeholder="Describe your collection"></textarea>';$(".action .add").click(function(i){i.preventDefault(),$(this).hide(),$(this).first().after(t)})}$(".searchbar .settings > a").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.searchfilter").addClass("active")}),$(".showprofile").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.profile").addClass("active")}),$(".editbox").click(function(t){t.preventDefault(),$(".action").removeClass("active"),$(".action.editsection").addClass("active")})},s=function(){logger("info","plugin.js / initIsotope"),$(window).load(function(){$(i.mSelector).length>0&&$(i.mSelector).isotope({columnWidth:i.mSizer,itemSelector:i.mItem,percentPosition:!0})}),$(".filter").length>0&&$(".filter .nav li").each(function(){var t=$(this),e=t.attr("data-filter");$("a",this).on("click",function(n){n.preventDefault(),$(i.mSelector).isotope({filter:e}),$(".filter .nav li").removeClass("active"),t.addClass("active")})})},c=function(){if(logger("info","plugin.js / initCharacterLimiter"),$(".featured .exhibition .description").length>0){var t=$(".featured .exhibition .description .text");if(t.text().length>240){var i=t.text().substr(0,240)+"...";t.text(i)}}},r=function(){logger("info","plugin.js / initCharacterLimiterToggle"),$(".limitchar").length>0&&$(".limitchar").each(function(){var t=$(".limitchar"),i=t.text().length;if(limit=t.attr("data-limit"),self=this,t.text().length>limit){var e=t.text().substr(0,limit)+'<span class="limitdot">...</span><span class="limithide">'+t.text().substr(limit,i)+'</span><div><a href="#" class="limittoggle">Show more</a></div>';t.html(e)}$(".limittoggle",this).on("click",function(t){t.preventDefault(),$(self).hasClass("show")?($(self).removeClass("show"),$(this).html("Show more")):($(self).addClass("show"),$(this).html("Show less"))})})},g=function(){logger("info","plugin.js / initSticky"),0!==$(".filter").length&&($(".filter").sticky({topSpacing:74}),$(window).on("scroll touchmove",function(){if($(".partners").length>0){var t=$(".partners").offset(),i=t.top-74;$(document).scrollTop()>=i?$(".filter").addClass("unstick"):$(".filter").removeClass("unstick")}}))},f=function(){logger("info","plugin.js / initMobileMenu"),i.mobile&&0!==$(i.mobileTrigger).length&&$(i.mobileTrigger).click(function(t){$(this).toggleClass("active"),$("nav").toggleClass("active")})},u=function(){if(logger("info","plugin.js / initMobileFilter"),i.mobile&&0!==$(".filter .nav").length){var t='<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Filter <span></span></a>';$(".filter .nav").addClass("dropdown-menu").wrap('<div class="select-filter dropdown"></div>'),$(".select-filter").prepend(t)}},d=function(){$('[data-toggle="tooltip"]').tooltip()},v=function(){logger("info","plugin.js / hideMessage"),0!==$("section.message").length&&$(".message-body a").click(function(t){t.preventDefault(),$(this).closest(".message").addClass("close")})},h=function(){0!==$(".list-control").length&&($(".list-control .fa-th").click(function(t){t.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".fa-bars").toggleClass("active"),$(".list-body").toggleClass("grids"),$(".list-body").toggleClass("list")}),$(".list-control .fa-bars").click(function(t){t.preventDefault(),$(this).toggleClass("active"),$(this).parent().find(".fa-th").toggleClass("active"),$(".list-body").toggleClass("grids"),$(".list-body").toggleClass("list")}))},m=function(){logger("info","plugin.js / initMediaViewer"),$(".mediaviewer").length>0&&($(".mediaviewer").on("click",function(t){t.preventDefault(),$("body").css("overflow","hidden"),$(".itemview").fadeIn()}),$(".closemedia").on("click",function(t){t.preventDefault(),$(".itemview").fadeOut(),$("body").css("overflow","visible")}))},p=function(){logger("info","plugins.js / initCarousel"),$(".carouselexhibition").length>0&&($(".carouselexhibition").slick({accessibility:!0,infinite:!1,dots:!0,arrows:!0,prevArrow:'<a href="#" class="slick-prev"><img src="img/ui/ic-left-arrow.png"></a>',nextArrow:'<a href="#" class="slick-next"><img src="img/ui/ic-right-arrow.png"></a>'}),$(".carouselexhibition .main .btn").click(function(t){t.preventDefault(),$(".carouselexhibition").slick("slickNext")}))},C=function(){logger("info","plugins.js / initShowMore"),$(".listmore").length>0&&$(".listmore").each(function(){var t=$(this).attr("data-target");$(this).on("click",function(){$("#"+t).hasClass("show")?($("#"+t).removeClass("show"),$(this).html("SHOW MORE INFO")):($("#"+t).addClass("show"),$(this).html("SHOW LESS INFO"))})})}};