@(qform:Form[espace.core.CommonQuery], content: List[espace.core.SourceResponse],filters: List[espace.core.CommonFilterResponse] )
@import helper._
@import helper.twitterBootstrap._



@testsearchmain("Test search") {
	
		<div class="container-fluid">
		
		@helper.form( action= routes.SearchController.posttestsearch() ){
	
     		<div class="page-header">
       			<h1>TEST SEARCH PAGE</h1>
       			<p class="lead">Pretty and nifty.</p>
     		</div>
	
			<div class="row" id="hsection">
				<div id="vsection" class="col-md-7">
					@helper.inputText(qform("searchTerm"), 'id -> "searchT")	
				</div>
				<div id="vsection" class="col-md-3">
					@inputNumber(qform("page"), '_default -> "2" )
					<button type="submit" class="btn btn-default" value="Search">Search</button>
				</div>
			</div>
		}
	

	
		<div class="row" >
	 		 <div id="nav" class="col-md-3">
	 		
					 
					<div class="row">
						<button class="btn btn-default" id="filterSearch">
							Search
							<script>
								$("#filterSearch").click(function() {
									//var where = $("#searchT").val();
									//var without = $("#excludeT").val();
									gothere(x);
								});
							</script>
						</button>
					</div>
					
					
					
					 
					<div class="col-sm-12" data-bind="foreach: jsoninfo.filters">
						<div class="form-group row">
  							<label for="filter-name">
  								Select <spam data-bind="text: filterName"></spam>:
  							</label>
  							
  							
						</div>
						
					</div>
					
					
					
					
					<script>
						
						//var x = "";
					
						var x;
						
						function remember() {
							
							var queryJ = new Object();
							
							var filters = []; //array
							
							$("select").each(function() {
								
								var thisfilter = $(this).attr('id');
								
								var filter = new Object();
								
								filter.filterID = thisfilter;
								
								var str = [];
								
								$( "select option:selected" ).each(function() {
									
									if($(this).attr('filterID') == thisfilter){
										str.push($( this ).attr('name'));
									}
	      						});
								
								filter.values = str;
								
								//alert(str.length);
								
								if(str.length != 0){
									filters.push(filter);
									//filters.push(JSON.stringify(filter));
								
								}
								
							});
    						// $( "div" ).text( str );
							//x = JSON.stringify(filters);
    						//alert(x);
    						
    						queryJ.searchTerm = "zeus"; //$("#searchT").val();
    						queryJ.page = "1";
    						queryJ.pageSize = "20";
    						//queryJ.filters = JSON.stringify(filters);
    						queryJ.filters = filters;
    						x=queryJ;

						}
						
						
						
						$("select").on("change", remember);

						//$("#searchbutt").on("click", alert(x));
						

						
					</script>    
			</div>
					 
		 	
				<div id="section" class="col-md-8">
					@if(content!=null) {
					
							<div id="tabs" class="row">
									<div id="ttt">
									@for(p <- content) {
										<button type="button" class="btn btn-sm btn-default" onClick="change('@p.source')" >
											@p.source (@p.count)
										</button>
									}
									</div>
								
							</div>
							
							
							<div class="col-md-12" id="True-content">
								
								
								
								@for(p <- content) {
									<div id="@p.source">
										<div class="row">
				  							<b>Source: </b> @p.source <br/>
				  							<b>Count: </b>@p.count <br/>
				  							<b>Query: </b>@p.query <br/>
				  						</div>
				  						
				  						<div class="row">
				  						
				  						
				  						@if(p.items!=null){
				  							@for(it <- p.items) {
				  								<div  class="col-md-12 thumbnail">
				  									<div class="col-md-4 text-right">
				  										<img alt="NO IMAGE" class="img-thumbnail" src="@if(it.thumb!=null && it.thumb.get(0)!="null") {@it.thumb.get(0)} else {}" /> 
				    								</div>
				    								
				  									<div class="col-md-8">
				    									<b>Title: </b> 
				    									<a href="@if(it.url!=null) {@if(it.url.original!=null) {@it.url.original.get(0)} else {#}} else {NA}"> 
				 											@shorttext(it.title,40)
				 										</a><br/>
				 										
				 										<b>Data Provider: </b> 
				    									@if(it.dataProvider!=null) {@shorttext(it.dataProvider,100)} else {NA} <br/>
				  										<b>Descr: </b>@if(it.description!=null) {@shorttext(it.description,100)} else {NA} <br/>
				   									</div>
				  									
				  									
				  									
				    								
				  								</div>
				  							}
				  						}
				  						</div>
									</div>
								}
							</div>
							
							<div id="Display_content">
								<script>change('@content.get(0).source')</script>
							</div>
							
					} else {
				  		Nothing here	
					}
				</div>	
		</div>
		
		
	</div>
}

  
